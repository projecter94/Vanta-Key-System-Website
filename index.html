<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vanta Command Center</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap');

        :root {
            --bg: #0a0e27;
            --bg-secondary: #111633;
            --card: #1a1f3a;
            --border: #2d3561;
            --primary: #6366f1;
            --primary-light: #818cf8;
            --secondary: #8b5cf6;
            --danger: #ef4444;
            --success: #22c55e;
            --warning: #f59e0b;
            --text: #e4e4e7;
            --text-muted: #a1a1aa;
            --gradient: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            --glow: 0 0 20px rgba(99, 102, 241, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'Inter', 'Courier New', monospace;
            overflow-x: hidden;
        }

        .hidden {
            display: none !important;
        }

        /* ANIMATIONS */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }
        }

        /* LOGIN SECTION */
        .login-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--card);
            padding: 50px;
            border: 2px solid var(--border);
            border-radius: 16px;
            width: 100%;
            max-width: 400px;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            animation: slideIn 0.5s ease;
            z-index: 1000;
        }

        .login-box h2 {
            margin-bottom: 30px;
            font-size: 32px;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        .login-box input {
            width: 100%;
            padding: 14px;
            margin-bottom: 20px;
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .login-box input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: var(--glow);
        }

        .login-box button {
            width: 100%;
            padding: 14px;
            background: var(--gradient);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .login-box button:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow);
        }

        /* MAIN LAYOUT */
        body {
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .dashboard-container {
            width: 100%;
            max-width: 1400px;
            animation: fadeIn 0.6s ease;
        }

        /* HEADER */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
            padding: 30px;
            border: 2px solid var(--border);
            border-radius: 16px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 36px;
            font-weight: 700;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header button {
            padding: 12px 24px;
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
            border: 2px solid var(--danger);
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .header button:hover {
            background: var(--danger);
            color: white;
        }

        /* TABS */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border);
            padding-bottom: 0;
        }

        .tab-btn {
            padding: 14px 24px;
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            border-bottom: 3px solid transparent;
        }

        .tab-btn.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-btn:hover:not(.active) {
            color: var(--text);
        }

        /* STATS GRID */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.05) 100%);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            animation: slideIn 0.5s ease;
        }

        .stat-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary);
            box-shadow: var(--glow);
        }

        .stat-card.online {
            border-color: var(--success);
        }

        .stat-card.danger {
            border-color: var(--danger);
        }

        .stat-num {
            font-size: 42px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
            font-family: 'JetBrains Mono', monospace;
        }

        .stat-card.danger .stat-num {
            color: var(--danger);
        }

        .stat-card.online .stat-num {
            color: var(--success);
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .stat-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }

        /* PANEL */
        .panel {
            background: var(--card);
            border: 2px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            animation: slideIn 0.6s ease;
        }

        .panel-header {
            padding: 20px 30px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
            border-bottom: 2px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-header h2 {
            font-size: 18px;
            font-weight: 700;
            margin: 0;
        }

        .panel-header-buttons {
            display: flex;
            gap: 10px;
        }

        /* TABLE */
        .table-wrapper {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
        }

        th,
        td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            color: var(--text-muted);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background: rgba(99, 102, 241, 0.05);
            font-size: 12px;
        }

        tr:hover {
            background: rgba(99, 102, 241, 0.08);
        }

        /* BADGES */
        .badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-family: 'Inter', sans-serif;
        }

        .badge.success {
            background: rgba(34, 197, 94, 0.2);
            color: var(--success);
        }

        .badge.danger {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        .badge.warning {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }

        .badge.online {
            animation: pulse 2s ease-in-out infinite;
        }

        /* BUTTONS */
        button {
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn {
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--gradient);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow);
        }

        .btn-secondary {
            background: rgba(99, 102, 241, 0.2);
            color: var(--primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: rgba(99, 102, 241, 0.3);
        }

        .btn-danger {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        .btn-danger:hover {
            background: var(--danger);
            color: white;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 11px;
            margin-right: 5px;
        }

        /* SCRIPT SETTINGS */
        .script-settings {
            padding: 30px;
        }

        .setting-group {
            margin-bottom: 30px;
        }

        .setting-label {
            display: block;
            margin-bottom: 12px;
            color: var(--text);
            font-weight: 600;
            font-size: 14px;
        }

        .setting-desc {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 8px;
            line-height: 1.5;
        }

        textarea,
        input[type="text"],
        input[type="password"] {
            width: 100%;
            padding: 14px;
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            resize: vertical;
            transition: all 0.3s ease;
        }

        textarea:focus,
        input[type="text"]:focus,
        input[type="password"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: var(--glow);
        }

        textarea {
            min-height: 100px;
        }

        /* MODAL */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: var(--card);
            padding: 30px;
            width: 100%;
            max-width: 600px;
            border: 2px solid var(--border);
            border-radius: 16px;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            font-size: 20px;
            margin: 0;
        }

        .modal-close {
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 24px;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: var(--danger);
        }

        /* LOG ENTRIES */
        .log-entry {
            padding: 12px;
            border-bottom: 1px solid var(--border);
            font-size: 12px;
            font-family: 'JetBrains Mono', monospace;
            line-height: 1.6;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-time {
            color: var(--primary);
            font-weight: 600;
        }

        .log-hwid,
        .log-ip,
        .log-exec {
            color: var(--text-muted);
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            table {
                font-size: 11px;
            }

            th,
            td {
                padding: 10px;
            }

            .modal-content {
                max-width: 90%;
            }
        }

        /* LOADING STATE */
        .loading {
            animation: pulse 1.5s ease-in-out infinite;
        }

        /* SCROLLBAR */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
    </style>
</head>

<body>

    <!-- LOGIN -->
    <div id="loginView" class="login-box">
        <h2>VANTA</h2>
        <input type="password" id="pass" placeholder="Enter admin password" onkeypress="if(event.key==='Enter') auth()">
        <button onclick="auth()">ACCESS SYSTEM</button>
    </div>

    <!-- DASHBOARD -->
    <div id="dashView" class="dashboard-container hidden">
        <!-- HEADER -->
        <div class="header">
            <h1>‚ö° VANTA COMMAND CENTER</h1>
            <button onclick="logout()">LOGOUT</button>
        </div>

        <!-- TABS -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('dashboard')">üìä Dashboard</button>
            <button class="tab-btn" onclick="switchTab('licenses')">üîê Licenses</button>
            <button class="tab-btn" onclick="switchTab('script')">‚öôÔ∏è Script Settings</button>
        </div>

        <!-- DASHBOARD TAB -->
        <div id="dashboardTab" class="tab-content">
            <!-- STATS -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üîë</div>
                    <div class="stat-num" id="s-total">0</div>
                    <div class="stat-label">Total Keys</div>
                </div>
                <div class="stat-card online">
                    <div class="stat-icon">üåê</div>
                    <div class="stat-num" id="s-online">0</div>
                    <div class="stat-label">Online Now</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚ö°</div>
                    <div class="stat-num" id="s-exec">0</div>
                    <div class="stat-label">Executions Today</div>
                </div>
                <div class="stat-card danger">
                    <div class="stat-icon">üö´</div>
                    <div class="stat-num" id="s-banned">0</div>
                    <div class="stat-label">Blacklisted</div>
                </div>
            </div>
        </div>

        <!-- LICENSES TAB -->
        <div id="licensesTab" class="tab-content hidden">
            <div class="panel">
                <div class="panel-header">
                    <h2>License Management</h2>
                    <div class="panel-header-buttons">
                        <button class="btn btn-primary btn-small" onclick="action('create')">+ GENERATE</button>
                        <button class="btn btn-secondary btn-small" onclick="loadData()">REFRESH</button>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>KEY</th>
                                <th>DISCORD</th>
                                <th>HWID</th>
                                <th>IP</th>
                                <th>STATUS</th>
                                <th>LAST SEEN</th>
                                <th>ACTIONS</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- SCRIPT SETTINGS TAB -->
        <div id="scriptTab" class="tab-content hidden">
            <div class="panel">
                <div class="panel-header">
                    <h2>‚öôÔ∏è Script Configuration</h2>
                    <button class="btn btn-primary btn-small" onclick="saveScript()">SAVE</button>
                </div>
                <div class="script-settings">
                    <div class="setting-group">
                        <label class="setting-label">Script API URL</label>
                        <textarea id="scriptUrl" placeholder="https://getvanta.vercel.app/api/payload"></textarea>
                        <p class="setting-desc">üîó This is the API endpoint URL that will be used in the Discord loader.
                            Make sure it's publicly accessible and properly configured. The Discord 'Get Script' button
                            will use this URL.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- LOG MODAL -->
    <div id="logModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìã Execution Logs</h3>
                <button class="modal-close" onclick="closeModal()">‚úï</button>
            </div>
            <div id="logList"></div>
        </div>
    </div>

    <script>
        const API = '/admin';
        let token = localStorage.getItem('vanta_jwt');

        // Check if we are in demo mode from previous session
        const isDemo = localStorage.getItem('vanta_demo') === 'true';

        if (token) init();

        async function auth() {
            // Trim removes spaces from beginning/end automatically
            const pass = document.getElementById('pass').value.trim();
            
            if (!pass) {
                alert('Please enter password');
                return;
            }

            // *** BYPASS LOGIC START ***
            if (pass === 'ethixvanta') {
                token = 'ethix-vanta-demo-token';
                localStorage.setItem('vanta_jwt', token);
                // Set demo flag so we know to load fake data
                localStorage.setItem('vanta_demo', 'true');
                init();
                return;
            }
            // *** BYPASS LOGIC END ***

            // Server login (Fallback)
            try {
                const res = await fetch(API + '/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ password: pass })
                });
                const data = await res.json();
                if (data.token) {
                    token = data.token;
                    localStorage.setItem('vanta_jwt', token);
                    localStorage.removeItem('vanta_demo'); // Ensure demo is off
                    init();
                } else {
                    alert('‚ùå Access Denied');
                }
            } catch (err) {
                // If network fails and password wasn't the bypass one
                alert('‚ùå Server Connection Failed. Incorrect password or no backend.');
            }
        }

        function init() {
            document.getElementById('loginView').classList.add('hidden');
            document.getElementById('dashView').classList.remove('hidden');
            loadData();
            // Only auto-refresh if we aren't in demo mode to save resources
            if (!localStorage.getItem('vanta_demo')) {
                setInterval(loadData, 30000);
            }
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));

            if (tab === 'dashboard') {
                document.getElementById('dashboardTab').classList.remove('hidden');
            } else if (tab === 'licenses') {
                document.getElementById('licensesTab').classList.remove('hidden');
            } else if (tab === 'script') {
                document.getElementById('scriptTab').classList.remove('hidden');
            }

            event.target.classList.add('active');
        }

        async function loadData() {
            // *** MOCK DATA FOR DEMO MODE ***
            if (localStorage.getItem('vanta_demo') === 'true') {
                console.log("Loading Demo Data...");
                
                // Mock Stats
                document.getElementById('s-total').innerText = "1,337";
                document.getElementById('s-online').innerText = "42";
                document.getElementById('s-exec').innerText = "891";
                document.getElementById('s-banned').innerText = "5";
                document.getElementById('scriptUrl').value = "https://cdn.discordapp.com/attachments/scripts/loader.lua";

                // Mock Table
                const tbody = document.getElementById('tableBody');
                tbody.innerHTML = `
                    <tr>
                        <td style="font-family:'JetBrains Mono'; letter-spacing:1px;">VANTA-KEY-X9J2</td>
                        <td>EthixUser#0001</td>
                        <td style="max-width:120px; overflow:hidden;">HWID-ABC-123-XYZ</td>
                        <td style="cursor:pointer; text-decoration:underline" onclick="toggleBlur(this)">192.168.1.1</td>
                        <td><span class="badge online success">‚óè ONLINE</span></td>
                        <td>Just now</td>
                        <td>
                            <button class="btn btn-secondary btn-small" onclick="viewLogs('demo')">LOGS</button>
                            <button class="btn btn-secondary btn-small">RESET</button>
                            <button class="btn btn-danger btn-small">BAN</button>
                            <button class="btn btn-danger btn-small">DEL</button>
                        </td>
                    </tr>
                    <tr>
                        <td style="font-family:'JetBrains Mono'; letter-spacing:1px;">VANTA-KEY-B7K1</td>
                        <td>AnotherUser#9999</td>
                        <td style="max-width:120px; overflow:hidden;">HWID-ZZZ-999-000</td>
                        <td style="cursor:pointer; text-decoration:underline" onclick="toggleBlur(this)">10.0.0.55</td>
                        <td><span class="badge warning">OFFLINE</span></td>
                        <td>2 hours ago</td>
                        <td>
                            <button class="btn btn-secondary btn-small" onclick="viewLogs('demo')">LOGS</button>
                            <button class="btn btn-secondary btn-small">RESET</button>
                            <button class="btn btn-danger btn-small">BAN</button>
                            <button class="btn btn-danger btn-small">DEL</button>
                        </td>
                    </tr>
                `;
                return; // Stop here, don't try to fetch from real server
            }
            // *** END MOCK DATA ***

            // REAL SERVER FETCH
            try {
                const res = await fetch(API + '/data', { headers: { 'Authorization': token } });
                if (res.status === 401) return logout();
                const data = await res.json();

                // Stats
                document.getElementById('s-total').innerText = data.keys.length;
                document.getElementById('s-online').innerText = data.onlineCount || 0;
                document.getElementById('s-exec').innerText = data.executionsToday || 0;
                document.getElementById('s-banned').innerText = data.keys.filter(k => k.isBlacklisted).length;

                // Table
                const tbody = document.getElementById('tableBody');
                tbody.innerHTML = '';
                if (data.keys && data.keys.length) {
                    data.keys.forEach(k => {
                        const statusHtml = k.isBlacklisted
                            ? `<span class="badge danger">BANNED</span>`
                            : (k.hwid ? `<span class="badge success">LINKED</span>` : `<span class="badge warning">UNLINKED</span>`);

                        const isOnline = new Date(k.lastSeen).getTime() > Date.now() - 300000;
                        const onlineHtml = isOnline
                            ? `<span class="badge online success">‚óè ONLINE</span>`
                            : `<span style="opacity:0.6; font-size:11px">${new Date(k.lastSeen).toLocaleString()}</span>`;

                        tbody.innerHTML += `
                            <tr>
                                <td style="font-family:'JetBrains Mono'; letter-spacing:1px;">${k.key}</td>
                                <td>${k.discordId || '-'}</td>
                                <td style="max-width:120px; overflow:hidden; text-overflow:ellipsis">${k.hwid || 'Waiting...'}</td>
                                <td style="cursor:pointer; text-decoration:underline" onclick="toggleBlur(this)">${k.ip || 'Waiting...'}</td>
                                <td>${statusHtml}</td>
                                <td>${k.lastSeen ? onlineHtml : 'Never'}</td>
                                <td>
                                    <button class="btn btn-secondary btn-small" onclick="viewLogs('${k.key}')">LOGS</button>
                                    <button class="btn btn-secondary btn-small" onclick="action('reset', '${k.key}')">RESET</button>
                                    <button class="btn btn-danger btn-small" onclick="action('blacklist', '${k.key}')">${k.isBlacklisted ? 'UNBAN' : 'BAN'}</button>
                                    <button class="btn btn-danger btn-small" onclick="action('delete', '${k.key}')">DEL</button>
                                </td>
                            </tr>
                        `;
                    });
                } else {
                    tbody.innerHTML = '<tr><td colspan="7" style="text-align:center; padding:30px;">No keys found</td></tr>';
                }

                // Load script URL
                const sres = await fetch(API + '/script', { headers: { 'Authorization': token } });
                if (sres.ok) {
                    const sdat = await sres.json();
                    document.getElementById('scriptUrl').value = sdat.script_url || '';
                }
            } catch (e) {
                // If real fetch fails, don't crash, just log to console
                console.log("Not connected to backend");
            }
        }

        function toggleBlur(el) {
            el.style.filter = el.style.filter === 'blur(4px)' ? 'none' : 'blur(4px)';
        }

        async function action(type, key) {
            if (localStorage.getItem('vanta_demo') === 'true') {
                alert("Simulated action: " + type);
                return;
            }

            if (!confirm('Confirm this action?')) return;
            try {
                await fetch(API + '/action', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'Authorization': token },
                    body: JSON.stringify({ action: type, key })
                });
                loadData();
            } catch (e) {
                alert('Error: ' + e.message);
            }
        }

        async function viewLogs(key) {
            if (localStorage.getItem('vanta_demo') === 'true') {
                const list = document.getElementById('logList');
                list.innerHTML = `
                     <div class="log-entry">
                        <span class="log-time">[${new Date().toLocaleString()}]</span><br>
                        <span class="log-hwid">HWID: DEMO-HWID-123</span> | <span class="log-ip">IP: 127.0.0.1</span> | <span class="log-exec">Exec: Synapse X</span>
                    </div>
                     <div class="log-entry">
                        <span class="log-time">[${new Date(Date.now()-3600000).toLocaleString()}]</span><br>
                        <span class="log-hwid">HWID: DEMO-HWID-123</span> | <span class="log-ip">IP: 127.0.0.1</span> | <span class="log-exec">Exec: Script-Ware</span>
                    </div>
                `;
                document.getElementById('logModal').classList.remove('hidden');
                return;
            }

            try {
                const res = await fetch(API + `/logs/${key}`, { headers: { 'Authorization': token } });
                const logs = await res.json();
                const list = document.getElementById('logList');
                list.innerHTML = '';
                if (logs && logs.length) {
                    logs.forEach(l => {
                        list.innerHTML += `
                            <div class="log-entry">
                                <span class="log-time">[${new Date(l.time).toLocaleString()}]</span><br>
                                <span class="log-hwid">HWID: ${l.hwid}</span> | <span class="log-ip">IP: ${l.ip}</span> | <span class="log-exec">Exec: ${l.executor}</span>
                            </div>
                        `;
                    });
                } else {
                    list.innerHTML = '<div class="log-entry" style="text-align:center; color:var(--text-muted);">No logs found</div>';
                }
                document.getElementById('logModal').classList.remove('hidden');
            } catch (e) {
                alert('Error loading logs: ' + e.message);
            }
        }

        function closeModal() {
            document.getElementById('logModal').classList.add('hidden');
        }

        function logout() {
            localStorage.removeItem('vanta_jwt');
            localStorage.removeItem('vanta_demo');
            location.reload();
        }

        async function saveScript() {
            if (localStorage.getItem('vanta_demo') === 'true') {
                alert("Simulated save successful!");
                return;
            }
            const url = document.getElementById('scriptUrl').value.trim();
            if (!url) {
                alert('Please enter a script URL');
                return;
            }
            if (!confirm('Save script URL?')) return;
            try {
                const res = await fetch(API + '/script', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'Authorization': token },
                    body: JSON.stringify({ script_url: url })
                });
                if (res.ok) {
                    alert('‚úÖ Script URL saved successfully');
                } else {
                    alert('‚ùå Failed to save');
                }
            } catch (e) {
                alert('Error: ' + e.message);
            }
        }
    </script>
</body>

</html>